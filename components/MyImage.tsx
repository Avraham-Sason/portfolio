"use client";

import React, { useEffect, useRef, useState } from "react";
import { useScrollAnimation } from "@/hooks/use-scroll-animation";

type SvgProps = React.SVGProps<SVGSVGElement>;

const getViewBoxForScreenSize = (width: number): string => {
    if (width < 640) {
        return "0 100 434 450";
    }
    if (width < 1024) {
        return "0 100 434 350";
    }
    return "0 100 434 450";
};

const AnimationStyles = () => (
    <style>{`
        @keyframes draw {
            to {
                stroke-dashoffset: 0;
            }
        }
        
        @keyframes fillIn {
            from {
                fill: transparent;
            }
            to {
                fill: currentColor;
            }
        }
        
        .svg-path {
            stroke: currentColor;
            stroke-width: 2;
            fill: transparent;
        }

        .svg-path.animate {
            animation: draw 2s ease-in-out forwards, fillIn 0.8s ease-in-out 2s forwards;
        }
    `}</style>
);

export default function MyImage(props: SvgProps) {
    const { ref, isVisible } = useScrollAnimation({
        threshold: 0.3,
        triggerOnce: true,
        requireFullView: true,
    });

    const svgRef = useRef<SVGSVGElement>(null);
    const [viewBox, setViewBox] = useState<string>("0 100 434 450");

    useEffect(() => {
        const updateViewBox = () => {
            const width = window.innerWidth;
            setViewBox(getViewBoxForScreenSize(width));
        };

        updateViewBox();

        window.addEventListener("resize", updateViewBox);

        return () => {
            window.removeEventListener("resize", updateViewBox);
        };
    }, []);

    useEffect(() => {
        if (!svgRef.current) return;

        const paths = svgRef.current.querySelectorAll(".svg-path");
        paths.forEach((path) => {
            const pathElement = path as SVGPathElement;
            const length = pathElement.getTotalLength();
            pathElement.style.strokeDasharray = length.toString();
            pathElement.style.strokeDashoffset = length.toString();
        });
    }, []);
    const pathClassName = `svg-path ${isVisible ? "animate" : ""}`;
    return (
        <>
            <AnimationStyles />
            <div ref={ref}>
                <svg
                    ref={svgRef}
                    version="1.0"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox={viewBox}
                    preserveAspectRatio="xMidYMid meet"
                    className="w-full h-auto"
                    {...props}
                >
                    <g transform="translate(0.000000,574.000000) scale(0.100000,-0.100000)">
                        <path
                            className={pathClassName}
                            d="M2145 4345 c-80 -18 -146 -47 -220 -97 -67 -46 -60 -41 -145 -123
-72 -71 -110 -143 -147 -283 -22 -85 -25 -119 -27 -279 -1 -165 -2 -180 -17
-167 -20 18 -43 18 -58 0 -19 -22 -24 -106 -11 -171 6 -33 15 -113 19 -178 9
-135 25 -170 78 -175 27 -3 32 -8 38 -38 3 -20 17 -68 31 -107 13 -40 27 -97
30 -127 6 -53 5 -55 -25 -72 -32 -18 -52 -54 -113 -208 -31 -79 -36 -85 -73
-99 -22 -8 -64 -32 -94 -53 -35 -25 -91 -49 -155 -69 -58 -18 -119 -45 -144
-63 -75 -54 -104 -66 -160 -66 -47 0 -62 -5 -111 -40 -35 -24 -88 -49 -140
-65 -45 -13 -100 -35 -121 -47 -88 -52 -163 -112 -179 -141 -18 -35 -65 -84
-130 -135 -46 -37 -82 -88 -100 -143 -6 -21 -48 -79 -91 -130 -44 -51 -80 -99
-80 -107 0 -7 21 12 46 43 25 31 53 64 62 73 35 35 70 88 81 124 18 57 65 113
128 156 41 28 65 53 81 85 14 29 41 59 72 81 50 36 50 36 87 21 76 -32 100
-68 181 -280 81 -212 137 -468 198 -910 26 -189 16 -269 -56 -466 -16 -45 -28
-85 -25 -87 7 -7 8 -5 38 73 47 124 67 215 123 545 25 146 25 435 0 543 -9 42
-21 75 -25 73 -4 -3 -1 -33 7 -68 22 -99 22 -423 -2 -573 -10 -66 -22 -133
-26 -150 -8 -28 -8 -28 -9 12 -1 41 -34 275 -51 362 -5 25 -18 106 -30 179
-22 140 -63 300 -107 417 -62 167 -100 252 -130 286 -12 15 -8 21 44 58 81 57
211 120 253 122 19 1 78 -2 131 -6 139 -11 182 5 275 103 70 73 74 75 134 83
56 8 107 26 98 34 -2 2 -21 -1 -43 -6 -22 -5 -58 -11 -80 -15 -32 -5 -53 -19
-112 -78 -97 -98 -124 -111 -238 -106 -200 7 -205 7 -282 -33 -40 -20 -103
-56 -140 -81 -63 -43 -69 -45 -90 -31 -12 8 -29 15 -38 15 -8 0 -15 4 -15 9 0
17 50 41 144 72 55 17 123 49 163 74 59 39 75 45 123 45 50 0 63 5 129 50 41
28 86 53 100 56 76 17 162 51 205 82 46 32 105 62 123 62 5 0 21 -28 36 -63
34 -79 105 -168 255 -322 65 -66 130 -137 146 -158 43 -57 69 -51 91 21 10 31
19 79 19 105 1 54 -7 52 101 23 32 -9 81 -16 107 -16 45 0 49 -2 73 -40 13
-21 39 -70 56 -109 31 -70 31 -70 13 -123 -30 -84 -26 -332 8 -563 15 -99 32
-229 38 -290 7 -60 25 -175 40 -255 33 -171 50 -293 50 -367 0 -29 5 -53 10
-53 6 0 10 11 10 24 0 63 -23 244 -46 356 -14 69 -36 211 -49 315 -14 105 -31
240 -40 300 -47 342 -45 423 16 582 41 108 51 164 36 215 -7 26 -5 28 35 39
24 6 55 17 71 25 33 17 33 18 3 -76 -13 -41 -30 -110 -37 -152 -16 -96 -2
-214 46 -403 42 -161 65 -277 105 -515 17 -102 46 -261 65 -355 18 -93 39
-212 46 -262 6 -51 16 -93 21 -93 5 0 7 15 4 33 -33 201 -51 304 -76 427 -16
80 -36 192 -45 250 -27 178 -55 319 -90 460 -77 312 -82 413 -31 585 15 50 29
100 30 111 1 12 16 42 33 68 23 35 32 42 37 30 8 -21 8 -26 -3 -20 -5 3 -19
-19 -31 -48 -35 -86 -25 -220 17 -233 7 -3 18 18 28 54 9 32 32 107 52 166 32
99 35 115 31 207 -1 55 -2 100 -2 100 1 0 26 -11 55 -24 30 -12 181 -64 337
-115 224 -73 313 -107 430 -166 200 -100 218 -119 332 -351 105 -211 107 -218
165 -434 59 -221 213 -665 214 -618 1 9 -4 29 -10 45 -59 149 -148 421 -185
563 -25 96 -57 204 -71 240 -43 109 -173 362 -210 412 -46 60 -69 76 -216 152
-126 66 -233 106 -517 196 -188 59 -322 109 -332 125 -4 5 -8 21 -8 35 -1 42
-38 112 -86 161 -44 45 -45 46 -35 88 5 23 20 59 34 79 37 57 67 130 80 200 9
50 17 66 33 72 29 12 34 29 34 127 0 48 9 135 21 194 25 133 23 180 -9 194
-22 9 -23 14 -18 60 4 28 9 107 13 178 7 149 -6 246 -47 359 -35 97 -64 144
-124 208 -90 95 -190 149 -326 174 -96 19 -134 19 -215 1z m293 -34 c82 -27
199 -103 251 -165 115 -134 170 -333 156 -569 -4 -65 -9 -117 -10 -115 -11 10
-35 209 -34 280 0 47 -5 105 -11 129 -17 62 -63 147 -109 199 -39 45 -39 45
-148 47 -59 0 -137 6 -173 13 -102 18 -364 24 -418 9 -68 -19 -151 -101 -197
-195 -32 -64 -39 -90 -42 -153 -3 -42 -15 -121 -28 -176 -13 -55 -30 -129 -38
-165 -15 -65 -15 -65 -16 92 -1 170 11 255 53 382 34 99 59 137 141 215 92 86
195 151 285 178 63 19 91 22 175 19 64 -3 123 -12 163 -25z m-75 -198 c69 -10
136 -14 185 -10 76 6 76 6 120 -41 86 -93 122 -196 122 -348 0 -56 7 -138 15
-181 24 -123 21 -398 -5 -493 -40 -143 -156 -346 -188 -326 -7 4 -12 22 -12
39 0 45 -19 109 -38 131 -10 10 -48 34 -87 53 -38 20 -82 44 -97 54 -30 22
-56 24 -93 7 -21 -9 -32 -8 -61 6 -33 15 -38 15 -67 0 -75 -39 -124 -62 -160
-73 -53 -18 -92 -61 -109 -122 -26 -94 -53 -89 -130 25 -148 216 -166 410 -72
761 8 33 20 104 25 159 13 146 65 250 166 333 46 38 46 38 182 43 153 6 155 6
304 -17z m-759 -749 c15 -21 16 -30 7 -51 -6 -14 -9 -39 -6 -57 4 -21 -1 -44
-15 -71 -30 -59 -25 -100 21 -150 11 -13 20 -44 25 -88 6 -62 5 -67 -13 -67
-45 0 -71 67 -72 190 0 41 -8 112 -16 157 -19 102 -9 163 28 163 12 0 30 -12
41 -26z m1266 -29 c0 -7 -7 -15 -15 -19 -15 -5 -22 24 -9 37 9 9 24 -2 24 -18z
m-14 -172 c-9 -41 -16 -119 -16 -173 0 -78 -3 -102 -16 -115 -9 -9 -18 -15
-20 -13 -2 3 3 55 26 244 6 44 10 103 10 130 0 28 6 56 13 63 19 20 21 -47 3
-136z m-1238 -57 c9 -69 9 -69 -10 -47 -26 34 -32 67 -17 103 15 36 15 36 27
-56z m50 -139 c33 -93 146 -247 181 -247 16 0 39 36 55 85 24 72 35 82 126
121 45 19 96 44 112 55 21 15 37 19 56 14 59 -14 90 -16 96 -6 12 18 43 13 83
-15 21 -14 68 -41 105 -60 76 -38 92 -60 102 -144 7 -52 19 -80 36 -80 21 0
117 140 147 214 18 44 33 71 33 58 0 -45 -43 -238 -65 -287 -54 -122 -219
-346 -290 -393 -66 -43 -163 -59 -274 -43 -137 20 -219 74 -320 210 -109 147
-167 284 -196 461 -23 143 -20 153 13 57z m265 -634 c97 -90 147 -108 312
-107 113 0 135 3 170 21 61 32 100 69 162 152 32 42 61 80 65 86 5 5 8 -52 7
-127 0 -134 11 -210 33 -224 8 -5 9 -1 5 11 -19 49 -28 106 -25 165 3 65 3 65
28 20 40 -74 35 -145 -18 -245 -25 -49 -72 -113 -118 -164 -76 -84 -76 -84
-69 -148 5 -48 2 -77 -11 -119 -9 -30 -20 -51 -24 -47 -5 4 -18 33 -31 63 -12
30 -36 75 -53 100 -17 25 -31 51 -33 59 -11 79 -49 133 -117 166 -30 15 -60
25 -67 23 -6 -2 18 -19 55 -37 57 -28 70 -39 91 -81 30 -60 32 -90 6 -90 -30
0 -122 19 -180 37 -53 16 -53 16 -48 61 3 27 17 61 36 88 30 43 30 43 -47 101
-109 81 -240 192 -289 246 -43 47 -43 47 -43 153 0 107 0 107 69 3 39 -60 97
-131 134 -166z m-213 140 c0 -62 -16 -64 -22 -3 -3 28 -6 31 -12 17 -15 -32
31 -111 108 -185 70 -67 244 -211 298 -246 28 -18 28 -18 0 -54 -25 -33 -27
-45 -33 -156 -6 -119 -20 -189 -40 -201 -5 -4 -24 11 -42 31 -17 21 -88 97
-157 169 -145 151 -206 228 -243 306 -26 55 -26 55 29 195 48 119 86 184 110
184 2 0 4 -26 4 -57z m1016 -124 c37 -59 56 -152 57 -274 0 -98 -3 -118 -29
-187 -22 -58 -33 -75 -41 -67 -20 20 -45 2 -41 -28 2 -20 8 -28 21 -26 16 1
18 -4 12 -35 -14 -77 -35 -62 -42 30 -4 52 -1 74 17 116 12 28 28 57 36 63 16
13 19 33 4 24 -12 -7 -12 1 -3 35 7 25 7 25 14 0 6 -23 7 -22 8 8 1 50 -25 38
-61 -28 -41 -75 -61 -95 -120 -120 -57 -24 -75 -18 -38 13 50 44 129 147 161
212 53 108 50 205 -7 282 -13 17 -24 40 -24 49 0 15 4 14 26 -7 15 -13 37 -40
50 -60z m-16 -555 c0 -8 -7 -14 -15 -14 -15 0 -21 21 -9 33 10 9 24 -2 24 -19z"
                        />
                        <path
                            className={pathClassName}
                            d="M1815 3631 c-62 -28 -131 -108 -111 -128 3 -3 19 6 35 20 44
37 94 50 160 43 31 -4 93 -9 139 -12 77 -6 82 -8 82 -29 0
-60 -17 -67 -82 -33 -52 27 -157 30 -203 6 -35 -19 -84 -68
-67 -68 7 0 12 4 12 10 0 5 20 21 45 36 63 36 139 36 218 -1
78 -36 91 -26 85 63 -4 55 -8 68 -32 88 -25 22 -36 24 -134
24 -82 0 -116 -5 -147 -19z m255 -6 c27 -14 48 -50 36 -62 -3
-3 -48 0 -100 6 -133 15 -184 14 -236 -9 -45 -20 -45 -20 -2
19 23 22 59 44 80 49 59 16 189 14 222 -3z"
                        />
                        <path
                            className={pathClassName}
                            d="M2442 3609 c-23 -7 -38 -20 -49 -42 -8 -18 -23 -48
-34 -67 -14 -27 -19 -54 -18 -115 1 -44 5 -91 9 -105 5 -15 6 8
3 56 -7 95 0 143 26 175 17 22 25 24 85 21 67 -4 67 -4 22 -33
-49 -30 -63 -57 -23 -44 35 12 115 18 151 11 18 -4 51 -22 74
-42 23 -20 42 -31 42 -26 0 6 -15 24 -34 40 -44 39 -131 60
-181 45 -48 -15 -44 1 5 21 84 33 200 20 239 -28 21 -25 34 -19
26 12 -21 88 -100 133 -233 131 -42 0 -92 -5 -110 -10z m251
-28 c35 -17 77 -63 77 -84 0 -3 -21 6 -47 21 -46 25 -54 27
-176 24 -108 -2 -128 0 -134 14 -8 22 7 33 58 44 65 14 174 4
222 -19z"
                        />
                        <path
                            className={pathClassName}
                            d="M1891 3473 c-26 -5 -96 -46 -105 -61 -7 -12 69 -32
119 -32 43 0 175 30 175 40 0 3 -20 16 -45 28 -48 23 -105 33
-144 25z m84 -23 c11 -19 -24 -60 -50 -60 -26 0 -61 41 -50 60
3 5 26 10 50 10 24 0 47 -5 50 -10z m55 -15 c26 -14 23 -17 -28
-28 -18 -4 -22 -2 -18 10 3 8 6 19 6 24 0 12 10 11 40 -6z
m-162 -20 c11 -24 11 -25 -16 -19 -42 10 -47 16 -27 31 26 18
30 17 43 -12z"
                        />
                        <path
                            className={pathClassName}
                            d="M2471 3433 c-40 -21 -52 -43 -23 -43 11 0 36 -7 55
-15 79 -33 197 -28 197 9 0 49 -162 83 -229 49z m138 -2 c12
-8 12 -13 -3 -35 -9 -14 -25 -26 -36 -26 -24 0 -50 26 -50 51 0
15 7 19 38 19 20 0 43 -4 51 -9z m-99 -21 c0 -21 -8 -24 -34
-14 -13 5 -14 9 -5 20 17 21 39 17 39 -6z m153 -4 c25 -20 21
-33 -15 -40 -39 -8 -41 -6 -25 27 14 31 16 31 40 13z"
                        />
                        <path
                            className={pathClassName}
                            d="M2416 3145 c16 -44 15 -72 -1 -88 -18 -18 -40 -23 -30
-7 13 21 -26 21 -60 1 -45 -26 -81 -27 -120 -1 -34 22 -81 26
-88 8 -4 -9 -12 -5 -27 12 -18 22 -21 23 -18 5 2 -11 14 -25 28
-32 21 -11 27 -10 38 5 12 16 16 15 61 -11 59 -33 82 -34 123
-4 22 16 32 18 35 10 7 -19 48 -16 66 5 21 23 22 72 1 98 -15
19 -16 19 -8 -1z"
                        />
                        <path
                            className={pathClassName}
                            d="M1572 3332 c13 -16 25 -25 27 -20 4 11 -28 48 -41 48
-5 0 1 -13 14 -28z"
                        />
                        <path
                            className={pathClassName}
                            d="M2169 2903 c-10 -2 -52 -18 -95 -36 -78 -32 -79 -33
-112 -97 -26 -51 -33 -74 -29 -105 4 -44 66 -148 92 -159 55
-21 134 11 165 67 14 26 14 28 -13 52 -15 14 -27 30 -27 34 0
13 92 22 154 15 31 -4 56 -10 56 -13 0 -3 -9 -19 -20 -36 -26
-39 -25 -58 4 -91 31 -37 84 -38 122 -3 38 35 84 119 84 154 0
46 -20 108 -42 132 -35 38 -160 84 -220 81 -29 -1 -64 1 -78 4
-14 3 -32 4 -41 1z m211 -32 c105 -33 150 -86 150 -177 0 -40 -7
-60 -31 -97 -50 -75 -90 -94 -136 -62 -32 22 -34 49 -5 89 19 27
23 39 14 48 -14 14 -156 23 -206 14 -42 -8 -45 -23 -11 -60 34
-37 32 -51 -17 -86 -70 -51 -105 -38 -169 60 -37 58 -36 82 4
161 31 62 34 65 107 95 69 29 82 32 170 29 52 -2 111 -8 130
-14z"
                        />
                        <path
                            className={pathClassName}
                            d="M2160 2872 c-14 -2 -29 -7 -35 -11 -5 -4 -31 -15 -57
-25 -29 -11 -48 -24 -48 -33 0 -10 6 -13 16 -9 9 4 109 3 221 0
204 -7 204 -7 176 -30 -86 -70 -237 -70 -344 0 -45 30 -59 33
-36 8 55 -61 230 -93 319 -58 46 17 108 65 108 82 0 6 -31 25
-69 44 -58 27 -76 32 -113 27 -24 -3 -59 -3 -78 1 -19 4 -46 6
-60 4z m234 -39 c39 -20 39 -20 -45 -25 -46 -3 -133 -2 -194 1
-110 6 -110 6 -55 27 75 29 235 28 294 -3z"
                        />
                        <path
                            className={pathClassName}
                            d="M2144 1923 c-9 -34 6 -57 41 -61 43 -5 61 40 29 72
-25 26 -63 20 -70 -11z m60 1 c18 -18 18 -17 10 -38 -12 -32
-64 -12 -64 25 0 15 12 26 32 28 4 1 14 -6 22 -15z"
                        />
                        <path
                            className={pathClassName}
                            d="M1960 1781 c-25 -47 36 -83 64 -38 8 12 8 22 0 35
-16 25 -51 27 -64 3z m50 -7 c11 -12 11 -18 -2 -31 -19 -18 -38
-10 -38 16 0 33 20 40 40 15z"
                        />
                        <path
                            className={pathClassName}
                            d="M3955 1287 c0 -172 -19 -416 -32 -404 -3 3 -57 355
-70 455 -3 23 -10 42 -15 42 -5 0 -7 -8 -4 -17 2 -10 7 -43 11
-73 3 -30 17 -122 30 -205 13 -82 31 -201 40 -264 10 -63 23
-135 31 -160 10 -35 14 -122 15 -356 0 -171 4 -301 8 -290 5 11
7 153 5 315 -3 258 -6 306 -24 383 -21 88 -21 88 1 235 24 157
33 491 14 524 -7 11 -10 -52 -10 -185z"
                        />
                        <path
                            className={pathClassName}
                            d="M2452 1458 c-26 -26 -5 -108 27 -108 33 0 42 77 13
103 -22 20 -25 20 -40 5z m36 -20 c15 -15 16 -55 2 -63 -16 -10
-40 14 -40 40 0 34 16 45 38 23z"
                        />
                        <path
                            className={pathClassName}
                            d="M3740 910 c-30 -5 -125 -15 -210 -25 -272 -29 -409
-45 -425 -51 -16 -7 -14 -65 5 -149 42 -179 66 -298 96 -474 19
-113 36 -207 39 -209 12 -12 12 8 -1 78 -7 41 -25 143 -40 225
-14 83 -40 206 -56 275 -39 170 -46 235 -24 243 10 4 88 14 174
22 86 9 227 24 312 35 155 20 220 24 220 15 0 -2 11 -82 25
-177 13 -95 31 -294 39 -442 8 -147 17 -271 20 -274 8 -8 7 29
-9 318 -13 244 -45 530 -65 578 -10 23 -14 24 -100 12z"
                        />
                        <path
                            className={pathClassName}
                            d="M2580 631 c-33 -62 13 -121 71 -91 24 13 26 72 3 94
-21 22 -61 20 -74 -3z m75 -21 c10 -32 -4 -60 -30 -60 -28 0 -49
32 -40 60 9 28 61 28 70 0z"
                        />
                    </g>
                </svg>
            </div>
        </>
    );
}
